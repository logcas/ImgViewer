!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e(require("vue"));else if("function"==typeof define&&define.amd)define(["vue"],e);else{var i="object"==typeof exports?e(require("vue")):e(t.vue);for(var n in i)("object"==typeof exports?exports:t)[n]=i[n]}}(window,function(t){return function(t){var e={};function i(n){if(e[n])return e[n].exports;var s=e[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(n,s,function(e){return t[e]}.bind(null,s));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=11)}([function(t,e,i){var n=i(8);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,i(4).default)("a447d5ae",n,!1,{})},function(t,e,i){var n=i(10);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,i(4).default)("d73b3c0e",n,!1,{})},function(e,i){e.exports=t},function(t,e,i){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var i=function(t,e){var i=t[1]||"",n=t[3];if(!n)return i;if(e&&"function"==typeof btoa){var s=(a=n,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */"),o=n.sources.map(function(t){return"/*# sourceURL="+n.sourceRoot+t+" */"});return[i].concat(o).concat([s]).join("\n")}var a;return[i].join("\n")}(e,t);return e[2]?"@media "+e[2]+"{"+i+"}":i}).join("")},e.i=function(t,i){"string"==typeof t&&(t=[[null,t,""]]);for(var n={},s=0;s<this.length;s++){var o=this[s][0];null!=o&&(n[o]=!0)}for(s=0;s<t.length;s++){var a=t[s];null!=a[0]&&n[a[0]]||(i&&!a[2]?a[2]=i:i&&(a[2]="("+a[2]+") and ("+i+")"),e.push(a))}},e}},function(t,e,i){"use strict";function n(t,e){for(var i=[],n={},s=0;s<e.length;s++){var o=e[s],a=o[0],r={id:t+":"+s,css:o[1],media:o[2],sourceMap:o[3]};n[a]?n[a].parts.push(r):i.push(n[a]={id:a,parts:[r]})}return i}i.r(e),i.d(e,"default",function(){return f});var s="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!s)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var o={},a=s&&(document.head||document.getElementsByTagName("head")[0]),r=null,l=0,h=!1,u=function(){},c=null,p="data-vue-ssr-id",d="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function f(t,e,i,s){h=i,c=s||{};var a=n(t,e);return m(a),function(e){for(var i=[],s=0;s<a.length;s++){var r=a[s];(l=o[r.id]).refs--,i.push(l)}e?m(a=n(t,e)):a=[];for(s=0;s<i.length;s++){var l;if(0===(l=i[s]).refs){for(var h=0;h<l.parts.length;h++)l.parts[h]();delete o[l.id]}}}}function m(t){for(var e=0;e<t.length;e++){var i=t[e],n=o[i.id];if(n){n.refs++;for(var s=0;s<n.parts.length;s++)n.parts[s](i.parts[s]);for(;s<i.parts.length;s++)n.parts.push(g(i.parts[s]));n.parts.length>i.parts.length&&(n.parts.length=i.parts.length)}else{var a=[];for(s=0;s<i.parts.length;s++)a.push(g(i.parts[s]));o[i.id]={id:i.id,refs:1,parts:a}}}}function v(){var t=document.createElement("style");return t.type="text/css",a.appendChild(t),t}function g(t){var e,i,n=document.querySelector("style["+p+'~="'+t.id+'"]');if(n){if(h)return u;n.parentNode.removeChild(n)}if(d){var s=l++;n=r||(r=v()),e=w.bind(null,n,s,!1),i=w.bind(null,n,s,!0)}else n=v(),e=function(t,e){var i=e.css,n=e.media,s=e.sourceMap;n&&t.setAttribute("media",n);c.ssrId&&t.setAttribute(p,e.id);s&&(i+="\n/*# sourceURL="+s.sources[0]+" */",i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(s))))+" */");if(t.styleSheet)t.styleSheet.cssText=i;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(i))}}.bind(null,n),i=function(){n.parentNode.removeChild(n)};return e(t),function(n){if(n){if(n.css===t.css&&n.media===t.media&&n.sourceMap===t.sourceMap)return;e(t=n)}else i()}}var y,T=(y=[],function(t,e){return y[t]=e,y.filter(Boolean).join("\n")});function w(t,e,i,n){var s=i?"":n.css;if(t.styleSheet)t.styleSheet.cssText=T(e,s);else{var o=document.createTextNode(s),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(o,a[e]):t.appendChild(o)}}},function(t,e,i){!function(){function e(t){return Math.sqrt(t.x*t.x+t.y*t.y)}function i(t,i){var n=function(t,i){var n=e(t)*e(i);if(0===n)return 0;var s=function(t,e){return t.x*e.x+t.y*e.y}(t,i)/n;return s>1&&(s=1),Math.acos(s)}(t,i);return function(t,e){return t.x*e.y-e.x*t.y}(t,i)>0&&(n*=-1),180*n/Math.PI}var n=function(t){this.handlers=[],this.el=t};function s(t,e){var i=new n(t);return i.add(e),i}n.prototype.add=function(t){this.handlers.push(t)},n.prototype.del=function(t){t||(this.handlers=[]);for(var e=this.handlers.length;e>=0;e--)this.handlers[e]===t&&this.handlers.splice(e,1)},n.prototype.dispatch=function(){for(var t=0,e=this.handlers.length;t<e;t++){var i=this.handlers[t];"function"==typeof i&&i.apply(this.el,arguments)}};var o=function(t,e){this.element="string"==typeof t?document.querySelector(t):t,this.start=this.start.bind(this),this.move=this.move.bind(this),this.end=this.end.bind(this),this.cancel=this.cancel.bind(this),this.element.addEventListener("touchstart",this.start,!1),this.element.addEventListener("touchmove",this.move,!1),this.element.addEventListener("touchend",this.end,!1),this.element.addEventListener("touchcancel",this.cancel,!1),this.preV={x:null,y:null},this.pinchStartLen=null,this.zoom=1,this.isDoubleTap=!1;var i=function(){};this.rotate=s(this.element,e.rotate||i),this.touchStart=s(this.element,e.touchStart||i),this.multipointStart=s(this.element,e.multipointStart||i),this.multipointEnd=s(this.element,e.multipointEnd||i),this.pinch=s(this.element,e.pinch||i),this.swipe=s(this.element,e.swipe||i),this.tap=s(this.element,e.tap||i),this.doubleTap=s(this.element,e.doubleTap||i),this.longTap=s(this.element,e.longTap||i),this.singleTap=s(this.element,e.singleTap||i),this.pressMove=s(this.element,e.pressMove||i),this.twoFingerPressMove=s(this.element,e.twoFingerPressMove||i),this.touchMove=s(this.element,e.touchMove||i),this.touchEnd=s(this.element,e.touchEnd||i),this.touchCancel=s(this.element,e.touchCancel||i),this._cancelAllHandler=this.cancelAll.bind(this),window.addEventListener("scroll",this._cancelAllHandler),this.delta=null,this.last=null,this.now=null,this.tapTimeout=null,this.singleTapTimeout=null,this.longTapTimeout=null,this.swipeTimeout=null,this.x1=this.x2=this.y1=this.y2=null,this.preTapPosition={x:null,y:null}};o.prototype={start:function(t){if(t.touches){this.now=Date.now(),this.x1=t.touches[0].pageX,this.y1=t.touches[0].pageY,this.delta=this.now-(this.last||this.now),this.touchStart.dispatch(t,this.element),null!==this.preTapPosition.x&&(this.isDoubleTap=this.delta>0&&this.delta<=250&&Math.abs(this.preTapPosition.x-this.x1)<30&&Math.abs(this.preTapPosition.y-this.y1)<30,this.isDoubleTap&&clearTimeout(this.singleTapTimeout)),this.preTapPosition.x=this.x1,this.preTapPosition.y=this.y1,this.last=this.now;var i=this.preV;if(t.touches.length>1){this._cancelLongTap(),this._cancelSingleTap();var n={x:t.touches[1].pageX-this.x1,y:t.touches[1].pageY-this.y1};i.x=n.x,i.y=n.y,this.pinchStartLen=e(i),this.multipointStart.dispatch(t,this.element)}this._preventTap=!1,this.longTapTimeout=setTimeout(function(){this.longTap.dispatch(t,this.element),this._preventTap=!0}.bind(this),750)}},move:function(t){if(t.touches){var n=this.preV,s=t.touches.length,o=t.touches[0].pageX,a=t.touches[0].pageY;if(this.isDoubleTap=!1,s>1){var r=t.touches[1].pageX,l=t.touches[1].pageY,h={x:t.touches[1].pageX-o,y:t.touches[1].pageY-a};null!==n.x&&(this.pinchStartLen>0&&(t.zoom=e(h)/this.pinchStartLen,this.pinch.dispatch(t,this.element)),t.angle=i(h,n),this.rotate.dispatch(t,this.element)),n.x=h.x,n.y=h.y,null!==this.x2&&null!==this.sx2?(t.deltaX=(o-this.x2+r-this.sx2)/2,t.deltaY=(a-this.y2+l-this.sy2)/2):(t.deltaX=0,t.deltaY=0),this.twoFingerPressMove.dispatch(t,this.element),this.sx2=r,this.sy2=l}else{if(null!==this.x2){t.deltaX=o-this.x2,t.deltaY=a-this.y2;var u=Math.abs(this.x1-this.x2),c=Math.abs(this.y1-this.y2);(u>10||c>10)&&(this._preventTap=!0)}else t.deltaX=0,t.deltaY=0;this.pressMove.dispatch(t,this.element)}this.touchMove.dispatch(t,this.element),this._cancelLongTap(),this.x2=o,this.y2=a,s>1&&t.preventDefault()}},end:function(t){if(t.changedTouches){this._cancelLongTap();var e=this;t.touches.length<2&&(this.multipointEnd.dispatch(t,this.element),this.sx2=this.sy2=null),this.x2&&Math.abs(this.x1-this.x2)>30||this.y2&&Math.abs(this.y1-this.y2)>30?(t.direction=this._swipeDirection(this.x1,this.x2,this.y1,this.y2),this.swipeTimeout=setTimeout(function(){e.swipe.dispatch(t,e.element)},0)):(this.tapTimeout=setTimeout(function(){e._preventTap||e.tap.dispatch(t,e.element),e.isDoubleTap&&(e.doubleTap.dispatch(t,e.element),e.isDoubleTap=!1)},0),e.isDoubleTap||(e.singleTapTimeout=setTimeout(function(){e.singleTap.dispatch(t,e.element)},250))),this.touchEnd.dispatch(t,this.element),this.preV.x=0,this.preV.y=0,this.zoom=1,this.pinchStartLen=null,this.x1=this.x2=this.y1=this.y2=null}},cancelAll:function(){this._preventTap=!0,clearTimeout(this.singleTapTimeout),clearTimeout(this.tapTimeout),clearTimeout(this.longTapTimeout),clearTimeout(this.swipeTimeout)},cancel:function(t){this.cancelAll(),this.touchCancel.dispatch(t,this.element)},_cancelLongTap:function(){clearTimeout(this.longTapTimeout)},_cancelSingleTap:function(){clearTimeout(this.singleTapTimeout)},_swipeDirection:function(t,e,i,n){return Math.abs(t-e)>=Math.abs(i-n)?t-e>0?"Left":"Right":i-n>0?"Up":"Down"},on:function(t,e){this[t]&&this[t].add(e)},off:function(t,e){this[t]&&this[t].del(e)},destroy:function(){return this.singleTapTimeout&&clearTimeout(this.singleTapTimeout),this.tapTimeout&&clearTimeout(this.tapTimeout),this.longTapTimeout&&clearTimeout(this.longTapTimeout),this.swipeTimeout&&clearTimeout(this.swipeTimeout),this.element.removeEventListener("touchstart",this.start),this.element.removeEventListener("touchmove",this.move),this.element.removeEventListener("touchend",this.end),this.element.removeEventListener("touchcancel",this.cancel),this.rotate.del(),this.touchStart.del(),this.multipointStart.del(),this.multipointEnd.del(),this.pinch.del(),this.swipe.del(),this.tap.del(),this.doubleTap.del(),this.longTap.del(),this.singleTap.del(),this.pressMove.del(),this.twoFingerPressMove.del(),this.touchMove.del(),this.touchEnd.del(),this.touchCancel.del(),this.preV=this.pinchStartLen=this.zoom=this.isDoubleTap=this.delta=this.last=this.now=this.tapTimeout=this.singleTapTimeout=this.longTapTimeout=this.swipeTimeout=this.x1=this.x2=this.y1=this.y2=this.preTapPosition=this.rotate=this.touchStart=this.multipointStart=this.multipointEnd=this.pinch=this.swipe=this.tap=this.doubleTap=this.longTap=this.singleTap=this.pressMove=this.touchMove=this.touchEnd=this.touchCancel=this.twoFingerPressMove=null,window.removeEventListener("scroll",this._cancelAllHandler),null}},t.exports=o}()},function(t,e,i){var n;n={install:function(t,e){e=e||{};var i=window.AlloyFinger||e.AlloyFinger,n=!(2!=t.version.substr(0,1));if(!i)throw new Error("you need include the AlloyFinger!");var s={"touch-start":"touchStart","touch-move":"touchMove","touch-end":"touchEnd","touch-cancel":"touchCancel","multipoint-start":"multipointStart","multipoint-end":"multipointEnd",tap:"tap","double-tap":"doubleTap","long-tap":"longTap","single-tap":"singleTap",rotate:"rotate",pinch:"pinch","press-move":"pressMove",swipe:"swipe"},o=[],a={},r=function(t){for(var e=0,i=o.length;e<i;e++)if(o[e].elem===t)return e;return null},l=function(t,e){var n=e.value,a=e.oldValue,l=e.arg;l=s[l],function(t,e){var n=e.eventName,s=e.elem,a=e.func,r=e.oldFunc;t&&t.alloyFinger?(t.alloyFinger.off&&r&&t.alloyFinger.off(n,r),t.alloyFinger.on&&a&&t.alloyFinger.on(n,a)):((e={})[n]=a,o.push({elem:s,alloyFinger:new i(s,e)}))}(o[r(t)],{elem:t,func:n,oldFunc:a,eventName:l})},h=function(t){var e=r(t);if(!isNaN(e)){var i=o.splice(e,1);i.length&&i[0]&&i[0].alloyFinger.destroy&&i[0].alloyFinger.destroy()}};a=n?{bind:l,update:l,unbind:h}:{update:function(t,e){var i={value:t,oldValue:e,arg:this.arg},n=this.el;l.call(this,n,i)},unbind:function(){var t=this.el;h.call(this,t)}},t.directive("finger",a)}},t.exports=n},function(t,e,i){"use strict";var n=i(0);i.n(n).a},function(t,e,i){(t.exports=i(3)(!1)).push([t.i,".image-item[data-v-884f6ae6] {\n  height: 100%;\n  width: 100%;\n  overflow: auto;\n}\n.image-item img[data-v-884f6ae6] {\n    position: relative;\n    transition: all 0.2s ease-in-out;\n    top: 0;\n    left: 0;\n}\n.image-item img.default-view[data-v-884f6ae6] {\n      top: 50%;\n      left: 50%;\n      -webkit-transform: translate(-50%, -50%);\n      transform: translate(-50%, -50%);\n}\n",""])},function(t,e,i){"use strict";var n=i(1);i.n(n).a},function(t,e,i){(t.exports=i(3)(!1)).push([t.i,".fade-enter-active[data-v-c38b4ce8],\n.fade-leave-active[data-v-c38b4ce8] {\n  transition: all 0.2s ease-in-out;\n}\n.fade-enter[data-v-c38b4ce8], .fade-leave-to[data-v-c38b4ce8] {\n  opacity: 0;\n  -webkit-transform: translateY(100%);\n  transform: translateY(100%);\n}\n.fade-enter-to[data-v-c38b4ce8],\n.fade-leave[data-v-c38b4ce8] {\n  opacity: 1;\n  -webkit-transform: translateY(0);\n  transform: translateY(0);\n}\n.img-viewer[data-v-c38b4ce8] {\n  position: relative;\n  display: inline-block;\n}\n.img-viewer .view-mask[data-v-c38b4ce8] {\n    display: flex;\n    position: fixed;\n    top: 0;\n    left: 0;\n    bottom: 0;\n    right: 0;\n    background: rgba(0, 0, 0, 0.7);\n    z-index: 999;\n    opacity: 1;\n    overflow: auto;\n    justify-content: center;\n    align-items: center;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    -ms-user-select: none;\n    user-select: none;\n}\n",""])},function(t,e,i){"use strict";i.r(e);var n=i(2),s=i.n(n),o=function(){var t=this.$createElement,e=this._self._c||t;return e("div",{directives:[{name:"show",rawName:"v-show",value:this.isDisplay,expression:"isDisplay"}],staticClass:"img-viewer"},[e("transition",{attrs:{name:"fade"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:this.isDisplay,expression:"isDisplay"}],staticClass:"view-mask"},[e("img-item",{ref:"img",on:{"hide-viewer":this.handleHide}})],1)])],1)};o._withStripped=!0;var a=function(){var t=this.$createElement,e=this._self._c||t;return e("div",{ref:"container",staticClass:"image-item",on:{click:this.handleClick}},[e("img",{directives:[{name:"finger",rawName:"v-finger:double-tap",value:this.bindDoubleTap,expression:"bindDoubleTap",arg:"double-tap"}],ref:"img",staticClass:"default-view",attrs:{src:this.imgSrc}})])};a._withStripped=!0;var r={data:function(){return{imgSrc:"",firstLoad:!0,originAttrs:{},pinchResize:!1,imgEl:null,container:null}},methods:{getFitInitSize:function(t,e){var i=Math.min(t,window.innerWidth);return{width:i,height:i/t*e}},getPinchSize:function(t,e){var i=window.innerHeight,n=i/e;return{width:t*n,height:i,ratio:n}},bindDoubleTap:function(t){var e=this.imgEl,i=this.container;if(t.target===e){console.log("-----------------------"),console.log("dbtap");var n=e.getBoundingClientRect(),s=n.width,o=n.height,a=n.left,r=t.changedTouches[0];r.clientX,r.clientY,top;if(console.log(this.pinchResize),this.pinchResize){this.pinchResize=!1,e.className="default-view";var l=this.getFitInitSize(this.originAttrs.width,this.originAttrs.height),h=l.width,u=l.height;e.style.maxWidth=h+"px",e.style.width=h+"px",e.style.height=u+"px"}else{this.pinchResize=!0;var c=this.getPinchSize(s,o),p=c.height,d=c.width;c.ratio;e.className="",e.style.maxWidth=d+"px",e.style.width=d+"px",e.style.height=p+"px",console.log(p,d),i.scrollLeft=100}}},handleClick:function(t){t.target!==this.$refs.img&&this.$emit("hide-viewer")},bindGesture:function(){var t=this.$refs.img;this.$refs.container;t.$af=new AlloyFinger(t,{doubleTap:function(t){}})},showViewer:function(t){this.pinchResize=!1;var e=new Image,i=this,n=this.imgEl;n.style.maxWidth="100%",e.onload=function(){var s=i.getFitInitSize(e.width,e.height),o=s.width,a=s.height;i.originAttrs.width=e.width,i.originAttrs.height=e.height,n.style.width=o+"px",n.style.height=a+"px",i.imgSrc=t,console.log("loaded:",o,a)},e.src=t}},mounted:function(){this.imgEl=this.$refs.img,this.container=this.$refs.container}};i(7);function l(t,e,i,n,s,o,a,r){var l,h="function"==typeof t?t.options:t;if(e&&(h.render=e,h.staticRenderFns=i,h._compiled=!0),n&&(h.functional=!0),o&&(h._scopeId="data-v-"+o),a?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),s&&s.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)},h._ssrRegister=l):s&&(l=r?function(){s.call(this,this.$root.$options.shadowRoot)}:s),l)if(h.functional){h._injectStyles=l;var u=h.render;h.render=function(t,e){return l.call(e),u(t,e)}}else{var c=h.beforeCreate;h.beforeCreate=c?[].concat(c,l):[l]}return{exports:t,options:h}}var h=l(r,a,[],!1,null,"884f6ae6",null);h.options.__file="src/ImgItem.vue";var u={name:"img-viewer",components:{imgItem:h.exports},data:function(){return{imageSrc:"",isDisplay:!1}},methods:{handleHide:function(t){this.isDisplay=!1},toggleScroll:function(){this.isDisplay?document.body.style.overflow="hidden":document.body.style.overflow=""},showViewer:function(t){this.$children[0].showViewer(t),this.isDisplay=!0}},mounted:function(){}},c=(i(9),l(u,o,[],!1,null,"c38b4ce8",null));c.options.__file="src/ImgViewer.vue";var p=c.exports,d=i(5),f=i.n(d),m=i(6),v=i.n(m);s.a.use(v.a,{AlloyFinger:f.a});e.default={install:function(){var t=(new(s.a.extend(p))).$mount();document.body.appendChild(t.$el),console.log("install");s.a.directive("viewer",{bind:function(e){console.log("bind directives"),e.$viewerHandler=function(e){return function(i){var n=e.src;t.showViewer(n)}}(e),e.addEventListener("click",e.$viewerHandler)},unbind:function(t){t.removeEventListener("click",t.$viewerHandler)}})}}}])});